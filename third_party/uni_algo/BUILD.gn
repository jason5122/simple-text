assert(path_exists("src/src"),
       "Missing submodules. Run: git submodule update --init --recursive")

source_set("uni_algo") {
  sources = [ "src/src/data.cpp" ]

  # On Windows, don't error when redefining `WIN32_LEAN_AND_MEAN`.
  if (is_win) {
    cflags = [ "-Wno-macro-redefined" ]
  }

  public_configs = [ ":uni_algo_includes" ]
}

config("uni_algo_includes") {
  # Disable unused modules.
  defines = [
    "UNI_ALGO_DISABLE_CONV",
    "UNI_ALGO_DISABLE_ITER",
    "UNI_ALGO_DISABLE_CASE",
    "UNI_ALGO_DISABLE_COLLATE",
    "UNI_ALGO_DISABLE_FULL_CASE",
    "UNI_ALGO_DISABLE_SEGMENT_WORD",
    "UNI_ALGO_DISABLE_NORM",
    "UNI_ALGO_DISABLE_NFKC_NFKD",
    "UNI_ALGO_DISABLE_SEGMENT_GRAPHEME",
    "UNI_ALGO_DISABLE_SEGMENT_WORD",
    "UNI_ALGO_NO_SHRINK_TO_FIT",
  ]

  include_dirs = [ "src/include" ]
}
